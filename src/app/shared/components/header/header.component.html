<header class="header">
  <div class="header-content">
    <div class="header-left">
      <h1 class="header-title">Supply Chain Management</h1>
    </div>
    <div class="header-right">
      @if (isLoggedIn) {
        <div class="user-menu-container">
          <div class="user-info" (click)="toggleProfileMenu()">
            <i class="bi bi-person-circle user-icon"></i>
            <span class="user-name">{{ username }}</span>
            <i class="bi bi-chevron-down dropdown-arrow"
               [class.rotate]="isProfileMenuOpen"></i>
          </div>

          @if (isProfileMenuOpen) {
            <div class="profile-menu">
              <div class="profile-menu-header">
                <i class="bi bi-person-circle profile-icon"></i>
                <div class="profile-details">
                  <strong>{{ username }}</strong>
                  <small>{{ userProfile?.email || 'UserModel' }}</small>
                </div>
              </div>

              <div class="profile-menu-items">
                <a class="profile-menu-item" href="#" (click)="closeProfileMenu()">
                  <i class="bi bi-person me-2"></i>
                  My Profile
                </a>
                <a class="profile-menu-item" href="#" (click)="closeProfileMenu()">
                  <i class="bi bi-gear me-2"></i>
                  Settings
                </a>
                <div class="profile-menu-divider"></div>
                <button class="profile-menu-item logout-btn" (click)="logout()">
                  <i class="bi bi-box-arrow-right me-2"></i>
                  Logout
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <button class="btn btn-outline-primary btn-sm" (click)="login()">
          <i class="bi bi-box-arrow-in-right me-1"></i>
          Login
        </button>
      }
    </div>
  </div>
</header>

<!-- Overlay pour fermer le menu en cliquant n'importe oÃ¹ -->
@if (isProfileMenuOpen) {
  <div class="menu-overlay" (click)="closeProfileMenu()"></div>
}
